<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plant</title>
    <link href="/assets/demo.css" rel="stylesheet">
    <script src="/dist/encantar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.2/dist/aframe-v1.4.2.min.js"></script>
    <script src="/plugins/aframe-with-encantar.js"></script>
    <script src="/plugins/extras/aframe-scan-gimmick-for-encantar.js"></script>
    <script src="/plugins/extras/aframe-gltf-anim.js"></script>
</head>

<body>
    <a-scene encantar="stats :false; gizmos: false">
        <ar-sources>
            <ar-camera-source></ar-camera-source>
        </ar-sources>

        <ar-trackers>
            <ar-image-tracker>
                <ar-reference-image name="menu" src="/assets/menu.webp"></ar-reference-image>
            </ar-image-tracker>
        </ar-trackers>

        <ar-viewport>
            <ar-hud>
                <!-- Navigation Buttons -->
                <button id="prev-button"
                    style="position: fixed; bottom: 10%; left: 10%; z-index: 999; padding: 10px; font-size: 16px;">Previous</button>
                <button id="next-button"
                    style="position: fixed; bottom: 10%; right: 10%; z-index: 999; padding: 10px; font-size: 16px;">Next</button>
            </ar-hud>
        </ar-viewport>

        <ar-camera></ar-camera>

        <ar-root reference-image="menu">
            <!-- Models -->
            <a-entity id="plant-model" rotation="0 0 0" position="0 -0.1 0" visible="true">
                <a-light type="ambient" intensity="1.5"></a-light>
                <a-entity gltf-model="#plant-model-asset" gltf-anim="clip: Idle" rotation="90 0 0"
                    scale="5 5 5"></a-entity>
            </a-entity>

            <a-entity id="milk-model" rotation="0 0 0" position="0 -0.1 0" visible="false">
                <a-light type="ambient" intensity="1.5"></a-light>
                <a-entity gltf-model="#milk-model-asset" gltf-anim="clip: Idle" rotation="90 0 0"
                    scale="5 5 5"></a-entity>
            </a-entity>

            <a-entity id="random-model" rotation="0 0 0" position="0 -0.1 0" visible="false">
                <a-light type="ambient" intensity="1.5"></a-light>
                <a-entity gltf-model="#random-model-asset" gltf-anim="clip: Idle" rotation="90 0 0"
                    scale="5 5 5"></a-entity>
            </a-entity>
        </ar-root>

        <a-assets>
            <a-asset-item id="plant-model-asset" src="/assets/plant.glb"></a-asset-item>
            <a-asset-item id="milk-model-asset" src="/assets/milk.glb"></a-asset-item>
            <a-asset-item id="random-model-asset" src="/assets/random.glb"></a-asset-item>
        </a-assets>
    </a-scene>

    <script>
        // List of model IDs
        const models = ['plant-model', 'milk-model', 'random-model'];
        let currentIndex = 0;

        // Function to update visibility
        function updateModelVisibility() {
            models.forEach((id, index) => {
                const model = document.getElementById(id);
                model.setAttribute('visible', index === currentIndex);
            });
        }

        // Event listeners for buttons
        document.getElementById('prev-button').addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + models.length) % models.length; // Wrap around
            updateModelVisibility();
        });

        document.getElementById('next-button').addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % models.length; // Wrap around
            updateModelVisibility();
        });

        // Initial visibility update
        updateModelVisibility();
    </script>
</body>

</html>